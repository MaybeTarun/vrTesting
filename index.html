<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NZHKSD52');</script>

    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        overflow: hidden;
        background: black;
      }

      /* Wrapper centers and maintains 16:9 ratio */
      #vr-wrapper {
        background: black;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100vw;
        height: 100vh;
        position: relative;;
      }

      /* Container holds both scenes side by side */
      #vr-container {
        display: flex;
        flex-direction: row;
        aspect-ratio: 16 / 9;
        width: 90vw;
        max-height: 100vh;
        background: black;
        overflow: hidden;
      }

      #vr-container a-scene {
        flex: 1;
        height: 100%;
      }

      /* Mobile stacking (vertical) */
      @media (max-width: 768px) {
        #vr-container {
          flex-direction: column;
          aspect-ratio: auto;
          width: 100%;
          height: 100%;
        }

        #vr-container a-scene {
          width: 100%;
          height: 50%;
        }
      }

      #overlay-image {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  aspect-ratio: 16 / 9;
  width: 90vw; /* match #vr-container width */
  max-height: 100vh;
  object-fit: cover;
  z-index: 10; /* above videos */
  pointer-events: none; /* so user can still interact with page if needed */
}

    </style>
  </head>

  <body style="margin:0; padding:0; overflow:hidden; height:100vh; width:100vw;">
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NZHKSD52"
        height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>

    <!-- LANGUAGE OVERLAY -->
    <div id="language-overlay" style="
      position:fixed; inset:0; background:rgba(20,20,20,0.93);
      display:flex; align-items:center; justify-content:center;
      z-index:9999; color:#fff; flex-direction:column; gap:28px;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      text-align:center; padding:24px; box-shadow:0 8px 48px rgba(0,0,0,0.6);
      backdrop-filter:blur(8px);
    ">
      <div style="font-size:2.1rem;font-weight:700;letter-spacing:0.05em;margin-bottom:2px;">
        Select Language
      </div>
      <div style="display:flex;gap:24px;flex-wrap:wrap;justify-content:center;width:100%;max-width:500px;">
        <button id="btn-hindi" style="
          flex:1 1 220px;min-width:220px;max-width:220px;height:66px;border-radius:16px;border:none;
          background:rgba(38,38,38,0.98);color:#fff;cursor:pointer;font-size:1.22rem;font-weight:600;
          letter-spacing:0.03em;box-shadow:0 4px 32px rgba(0,0,0,0.19);margin:4px;
          transition:background 0.19s,transform 0.13s,box-shadow 0.19s;outline:none;
          display:flex;align-items:center;justify-content:center;padding:0 8px;
        "
        onmouseover="this.style.background='#444';this.style.boxShadow='0 4px 32px rgba(0,0,0,0.31)';this.style.transform='scale(1.07)'"
        onmouseout="this.style.background='rgba(38,38,38,0.98)';this.style.boxShadow='0 4px 32px rgba(0,0,0,0.19)';this.style.transform='scale(1)'"
        onmousedown="this.style.background='#555'"
        onmouseup="this.style.background='#444'">Hindi</button>

        <button id="btn-malayalam" style="
          flex:1 1 220px;min-width:220px;max-width:220px;height:66px;border-radius:16px;border:none;
          background:rgba(38,38,38,0.98);color:#fff;cursor:pointer;font-size:1.22rem;font-weight:600;
          letter-spacing:0.03em;box-shadow:0 4px 32px rgba(0,0,0,0.19);margin:4px;
          transition:background 0.19s,transform 0.13s,box-shadow 0.19s;outline:none;
          display:flex;align-items:center;justify-content:center;padding:0 8px;
        "
        onmouseover="this.style.background='#444';this.style.boxShadow='0 4px 32px rgba(0,0,0,0.31)';this.style.transform='scale(1.07)'"
        onmouseout="this.style.background='rgba(38,38,38,0.98)';this.style.boxShadow='0 4px 32px rgba(0,0,0,0.19)';this.style.transform='scale(1)'"
        onmousedown="this.style.background='#555'"
        onmouseup="this.style.background='#444'">Malayalam</button>
      </div>
    </div>

    <!-- VR VIDEO CONTAINER (centered 16:9) -->
    <div id="vr-wrapper">
      <div id="vr-container">
        <a-scene embedded vr-mode-ui="enabled: false" ar-mode-ui="enabled: false">
          <a-videosphere src="#vidLeft" rotation="0 180 0"></a-videosphere>
          <a-camera position="0 0 0"></a-camera>
        </a-scene>
        
        <a-scene embedded vr-mode-ui="enabled: false" ar-mode-ui="enabled: false">
          <a-videosphere src="#vidRight" rotation="0 180 0"></a-videosphere>
          <a-camera position="0 0 0"></a-camera>
        </a-scene>
        
      </div>
      <img id="overlay-image" src="vroverlay.png" alt="Overlay" />

    </div>

    <!-- Hidden video -->
    <video id="vidLeft" autoplay loop playsinline webkit-playsinline crossorigin="anonymous" muted style="display:none;"></video>
    <video id="vidRight" autoplay loop playsinline webkit-playsinline crossorigin="anonymous" muted style="display:none;"></video>


    <script>
      window.dataLayer = window.dataLayer || [];
    
      const overlay = document.getElementById('language-overlay');
      const btnHindi = document.getElementById('btn-hindi');
      const btnMalayalam = document.getElementById('btn-malayalam');
    
      const videoLeft = document.getElementById('vidLeft');
      const videoRight = document.getElementById('vidRight');
    
      const sourcesByLang = {
        hi: 'https://stream.mux.com/PfUAw4LQEp600N7AZeZLHRnd5rPvU00lBPGwkzZDH01Q4Q.m3u8',
        ml: 'https://stream.mux.com/ONbhP3Pu1cRkn00u1UHR02dX02D92tcr901CV01Q4LqLL9JI.m3u8'
      };
    
      async function startPlaybackForLanguage(langKey) {
        const src = sourcesByLang[langKey];
        if (!src) return;
        overlay.style.display = 'none';
    
        // fullscreen + orientation
        try { await document.documentElement.requestFullscreen(); } catch {}
        try { await screen.orientation.lock('landscape'); } catch {}
    
        // HLS attach to both videos
        if (Hls.isSupported()) {
          const hlsLeft = new Hls();
          const hlsRight = new Hls();
          hlsLeft.loadSource(src);
          hlsRight.loadSource(src);
          hlsLeft.attachMedia(videoLeft);
          hlsRight.attachMedia(videoRight);
          hlsLeft.on(Hls.Events.MANIFEST_PARSED, () => videoLeft.play());
          hlsRight.on(Hls.Events.MANIFEST_PARSED, () => videoRight.play());
        } else {
          videoLeft.src = src;
          videoRight.src = src;
          videoLeft.play();
          videoRight.play();
        }
      }
    
      btnHindi.onclick = () => startPlaybackForLanguage('hi');
      btnMalayalam.onclick = () => startPlaybackForLanguage('ml');
    </script>
    
    
  </body>
</html>
